

\subsection{Local duality}
\label{ch2:ssec:local-duality}

Our main interest for constructing an $\infty$-categorical version of Positselski duality is related to local duality, in the sense of \cite{hovey-palmiery-strickland_97} and \cite{barthel-heard-valenzuela_2018}. In this section we use \cref{ch2:thm:Positselski-duality-coidempotent} to construct an alternative proof of \cite[2.21]{barthel-heard-valenzuela_2018}. We first recall the construction of local duality.

Let $(\C, \otimes, \1)$ be a presentably symmetric monoidal $\infty$-category. The tensor product $\otimes$ preserves filtered colimits separately in each variable, which by the adjoint functor theorem (\cite[5.5.2.9]{lurie_09}) means that the functor $A\otimes (-)$ has a right adjoint $\iHom(A, -)$, making $\C$ a closed symmetric monoidal category. From this internal hom-object we get a functor 
\[(-)^\vee = \iHom(-, \1)\: \C\op \to \C,\] 
which we call \emph{the linear dual}\index{Linear dual}. 

\begin{definition}
    \index{Compact object}
    \index{Dualizable object}
    An object $A\in \C$ is \emph{compact} if the functor $\Hom(A, -)$ preserves filtered colimits, and it is \emph{dualizable} if the natural map $A^\vee \otimes B \to \Hom(A,B)$ is an equivalence for all $B\in \C$. 
\end{definition}

The category $\C$ is said to be \emph{compactly generated}\index{Compactly generated} if the smallest localizing subcategory containing the compact objects is $\C$. 

\begin{definition}
    \index{Local duality!Context}
    A \emph{local duality context} is a pair $(\C, \K)$, where $\C$ is a presentably symmetric monoidal stable $\infty$-category compactly generated by dualizable objects, and $\K\subseteq \C$ is a set of compact objects. 
\end{definition}

\begin{construction}
    \index{Local duality!Torsion objects}
    \index{Local duality!Local objects}
    \index{Local duality!Complete objects}
    \index{Right orthogonal complement}
    Let $(\C, \K)$ be a local duality context. We denote the localizing ideal generated by $\K$ by $\C\Ktors := \Loc_\C^\otimes(\K)$. The \emph{right orthogonal complement} of $\C\Ktors$, in other words those objects $A\in \C$ such that $\Hom(X, A) \simeq 0$ for all $X\in \C\Ktors$ is denoted by $\C\Kloc$. By \cite[2.17]{barthel-heard-valenzuela_2018} this category is also a compactly generated localizing subcategory of $\C$. Lastly, we define the category $\C\Kcomp$ to be the right orthogonal complement to $\C\Kloc$. 

    Now, the fully faithful inclusion $i_{\K-\mathrm{tors}}\:\C\Ktors\hookrightarrow \C$ has a right adjoint functor $\Gamma \:\C\to \C\Ktors$---again by the adjoint functor theorem. This means, in particular, that $\Gamma$ is a colocalization. Similarly, the fully faithful inclusion $i_{\K-\mathrm{loc}}\:\C\Kloc\hookrightarrow \C$ has a left adjoint functor $L\: \C\to \C\Kloc$, and the fully faithful inclusion $i_{\K-\mathrm{comp}}\:\C\Kcomp\hookrightarrow \C$ has a left adjoint functor $\Lambda\:\C\to \C\Kcomp$, which are then both localizations by definition. 
\end{construction}

\begin{remark}
    Note that in the paper \cite{barthel-heard-valenzuela_2018} referenced above, they use the term \emph{left orthogonal complement} instead of right. Both of these are used throughout the literature, but we decided on using \emph{right}, as it felt more natural to the author. 
\end{remark}

The following is usually referred to as the local duality theorem, see \cite[3.3.5]{hovey-palmiery-strickland_97} or \cite[2.21]{barthel-heard-valenzuela_2018}. 

\begin{theorem}
    \label{ch2:thm:local-duality-co-contra}
    \index{Local duality!Theorem}
    \index{Localization!Smashing}
    \index{Colocalization!Smashing}
    For any local duality context $(\C, \K)$, 
    \begin{enumerate}
        \item the functor $L$ is a smashing localization,
        \item the functor $\Gamma$ is a smashing colocalization, 
        \item there are equivalences of functors $\Gamma \Lambda \simeq \Gamma$ and $\Lambda\Gamma \simeq \Lambda$,  
        \item the functors $\Lambda\circ i_{\K-\mathrm{tors}}$ and $\Gamma \circ i_{\K-\mathrm{comp}}$ are mutually inverse equivalences, and 
        \item the functors $(\Gamma, \Lambda)$, viewed as endofunctors on $\C$, form an adjoint pair. 
    \end{enumerate} 
    In particular, there are equivalences
    \[\C\Ktors\simeq \C\Kcomp\]
    of symmetric monoidal stable $\infty$-categories. 
\end{theorem}

\begin{remark}
    The result will essentially follow from recognizing $(\Gamma, \Lambda)$, viewed as endofunctors on $\C$, as the adjoint comonad-monad pair $C\otimes (-)\dashv \iHom(C,-)$ for a certain coidempotent cocommutative coalgebra $C$, and then applying \cref{ch2:thm:Positselski-duality-coidempotent}. 
    \index{Cocommutative coalgebra!Coidempotent}
    \index{Positselski duality}
\end{remark}

\begin{proof}
    Let us first consider the comodule side of the story. By \cite[3.3.3]{hovey-palmiery-strickland_97} the functor $L$ is a smashing localization, as it is a finite localization\index{Localization} away from $\K$. By construction the functor $\Gamma$ is determined by the kernel of the localization $A\to LA$, hence it is a smashing colocalization. This proves part $(1)$ and $(2)$. 

    As $\Gamma$ is smashing it is given by $\Gamma A \simeq \Gamma \1 \otimes A$, and as $\C\Ktors$ is an ideal, it inherits a symmetric monoidal structure from $\C$, making $\Gamma$ a symmetric monoidal functor. In particular, the object $\Gamma \1$ is the unit in $\C\Ktors$. The unit in a compactly generated symmetric monoidal stable $\infty$-category is both a commutative algebra and a cocommutative coalgebra. The inclusion $i_{\K-\mathrm{tors}}\: \C\Ktors\hookrightarrow \C$ is op-lax monoidal, as it is the left adjoint of a symmetric monoidal functor, meaning that it preserves coalgebras. In particular, $\Gamma\1$ treated as an object in $\C$ is a cocommutative coalgebra. Since $\Gamma$ is a smashing colocalization $\Gamma \1$ is a coidempotent coalgebra. By \cref{ch2:thm:dual-monoidal-BB} there is then an equivalence $\C\Ktors\simeq \Comod_{\Gamma\1}$, meaning that $\Gamma$ is identified with the cofree $\Gamma \1$-comodule functor. 

    Let us now turn to the contramodule side of the story. By defintion, there is a cofiber sequence $\Gamma \1 \to \1 \to L\1$, which induces a cofiber sequence 
    \[\iHom(L\1, A) \to \iHom(\1, A)\simeq A \to \iHom(\Gamma \1, A)\]
    for any $A\in \C$. Letting $X \in \C\Kcomp$ we have, by defintion, that $\Hom(B,X) \simeq 0$ for any $B \in \C\Kloc$. We want to show that also $\iHom(B, X) \simeq 0$ for all $B\in \C\Kloc$. By a Yoneda argument it suffices to show 
    \[\Hom(U, \iHom(B, X))\simeq \Hom(U, 0) \simeq 0\]
    for all $U \in \C$. By the hom-tensor adjunction we have 
    \[\Hom(U, \iHom(B, X)) \simeq \Hom(U\otimes B, X).\]
    As $L$ is smashing, $\C\Kloc$ is a localizing $\otimes$-ideal, implying that $U\otimes B \in \C\Kloc$ for all $U\in \C$ and $B \in \C\Kloc$. In particular, by the defining property of $X\in \C\Kcomp$, we have $\Hom(U\otimes B, X) \simeq 0$, which then finally implies that also the internal hom $\iHom(B, X) \simeq 0$ for all $B \in \C\Kloc$.   
    
    Now, letting $B = L\1$ gives an equivalence $\iHom(L\1, X)\simeq 0$, meaning that $X \simeq \iHom(\Gamma\1, X)$ by the above cofiber sequence. Hence, any object in $\C\Kcomp$ is a free contramodule over the idempotent cocommutative coalgebra $\Gamma \1$, giving an equivalence $\C\Kcomp \simeq \Contra_{\Gamma\1}$. Furthermore, as $\Lambda$ is a localization by definition, we have an equivalence $\Lambda X \simeq \iHom(\Gamma \1, X)$ for all $X\in \C\Kcomp$, which by idempotency implies that the functors themselves are equivalent. 
    
    To summarize: Any object $M$ in $\C\Ktors$ is a cofree $\Gamma\1$-comodule, and the functor $\Gamma$ coincides with the cofree functor; any object $X \in \C\Kcomp$ is a free $\Gamma\1$-contramodule, and the functor $\Lambda$ coincides with the free functor. This proves part $(5)$. 
    
    By \cref{ch2:thm:Positselski-duality-coidempotent} we then get equivalences of categories 
    \[\C\Ktors\simeq \Comod_{\Gamma \1}(\C) \simeq \Contra_{\Gamma \1}(\C)\simeq \C\Kcomp\]
    given by the mutually inverse equivalences 
    \begin{center}
        \begin{tikzcd}
            \Comod_{\Gamma\1} \arrow[rr, yshift=2pt, "{\iHom(\Gamma\1,-)}"] && \Contra_{\Gamma \1} \arrow[ll, yshift=-2pt, "\Gamma\1 \otimes (-)"]
        \end{tikzcd}
    \end{center}
    proving part $(4)$.
    
    Finally, part $(3)$. Let $A\in \C$. The equivalences $\Gamma \Lambda A\simeq \Gamma A$ and $\Lambda\Gamma A \simeq \Lambda A$ follow from the equivalences 
    \[\Gamma \1 \otimes \iHom(\Gamma\1, A)\simeq \iHom_{\Gamma\1}(\Gamma\1, \Gamma\1\otimes A) \simeq \Gamma\1 \otimes A\]
    and 
    \[\iHom(\Gamma\1, \Gamma\1\otimes A)\simeq \iHom(\Gamma \1, A),\] 
    as we showed in the proof of \cref{ch2:thm:Positselski-duality-coidempotent}. 
\end{proof}

\begin{remark}
    \label{ch2:rm:contramodular-BB}
    The author feels that the equivalence 
    \[\C\Kcomp\simeq \Contra_{\Gamma\1}\] 
    should be a formal consequence of a ``contramodular'' Barr--Beck theorem, but such a result has so far escaped our grasp. 
\end{remark}

\begin{remark}
    If the more general version of Positselski duality mentioned in \cref{ch2:rm:holds-generally-for-separable} holds, one could be able to generalize local duality to slightly more exotic situations, where the functors are not localizations. 
\end{remark}

The motivation for proving local duality in this setup was to have the following visually beautiful description of local duality. \index{Local duality!Diagram}

\begin{center}
    \begin{tikzcd}[sep = large]
        & 
        \Mod_{L\1} 
        \arrow[d, xshift=-2pt] 
        \arrow[rdd, dotted, bend left] 
        & \\
        & 
        \C \arrow[u, xshift=2pt] 
        \arrow[ld, yshift=-2pt, xshift=1pt] 
        \arrow[rd, yshift=2pt, xshift=1pt]                  
        & \\
        \Comod_{\Gamma \1} 
        \arrow[ru, yshift=2pt, xshift=-1pt] 
        \arrow[rr, yshift=2pt, "\simeq"] 
        \arrow[ruu, dotted, bend left] 
        &                                                     
        & \Contra_{\Gamma\1} 
        \arrow[lu, yshift=-2pt, xshift=-1pt] 
        \arrow[ll, yshift=-2pt]
    \end{tikzcd}
\end{center}

Here the dotted arrows correspond to taking the right-orthogonal complement. 

\begin{remark}
    \label{ch2:rm:contramodule-over-pro-ring}
    A visual, and intuitional, problem with the above picture is that the contramodule category is dependent on the coalgebra $\Gamma\1$ and not on its unit $\Lambda \1$. In the abelian situation, there is a notion of contramodule over a topological ring which would perfectly fix this issue, as one can show that $\Lambda \1$ is always an ``adic'' commutative algebra. We plan to explore this connection in future work. The above comment in \cref{ch2:rm:contramodular-BB} on a Barr--Beck result for contramodules might then be more easily accessible in this case, as one does not have to construct the unit in a dual but equal category. It might also be possible directly by using Positselski's notion of a \emph{dedualizing complex}, see \cite{positselski_2016}. 
\end{remark}

\begin{addendum}
    In the addendum to this paper, see \cref{ch2:addendum}, we have added a construction of the category of contramodules over a topological ring, that fixes exactly the intuitional problem described in the above remark. 
\end{addendum}

\begin{remark}
    In the local duality theorem there is another naturally appearing functor---briefly encountered in the proof of \cref{ch2:thm:Positselski-duality-coidempotent}---which is the right adjoint to the inclusion $\C\Kloc\hookrightarrow \C$, given by $V \simeq \iHom(L\1, -)$. As discussed in \cref{ch2:ex:algebra-module-monad} it is a comonadic functor, and its category of comodules is equivalent to $\Mod_{L\1}$. We can think of the objects in $\Comod_{\iHom(L\1,-)}$ as ``co-contramodules''. Adding these to the picture gives 
    \begin{center}
        \begin{tikzcd}[sep = large]
            \Mod_{L\1} 
            \arrow[rd, yshift=-2pt, xshift=-1pt] 
            \arrow[rr, "\simeq"] 
            && 
            \Cocontra_{L\1} 
            \arrow[ld, yshift=2pt, xshift=-1pt] 
            \arrow[dd, dotted] 
            \\
            & 
            \C 
            \arrow[lu, yshift=2pt, xshift=1pt]
            \arrow[ru, yshift=-2pt, xshift=1pt] 
            \arrow[ld, yshift=-2pt, xshift=1pt] 
            \arrow[rd, yshift=2pt, xshift=1pt]   
            &
            \\
            \Comod_{\Gamma \1} 
            \arrow[ru, yshift=2pt, xshift=-1pt] 
            \arrow[rr, "\simeq"]
            \arrow[uu, dotted] 
            && 
            \Contra_{\Gamma\1} 
            \arrow[lu, yshift=-2pt, xshift=-1pt]                
            \end{tikzcd}
    \end{center}
    which also makes this story enticingly connected to $4$-periodic semi-orthogonal decompositions and spherical adjunctions---see \cite[Section 2.5]{dyckerhoff-kaparanov-schechtman-soibelman_2024}. 
\end{remark}



\subsection{Examples}

Our main interest in \cref{ch2:thm:local-duality-co-contra} is related to chromatic homotopy theory and derived completion of rings. We will not present comprehensive introductions to these topics here, hence the interested reader is referred to \cite{barthel-beaudry_19} for details on the former and \cite{barthel-heard-valenzuela_2020} for the latter.

\subsubsection*{Chromatic homotopy theory}

The category of spectra, $\Sp$, is the initial presentably symmetric monoidal stable $\infty$-category. Fixing a prime $p$, one can describe chromatic homotopy theory as the study of $p$-local spectra together with a \emph{chromatic filtration}, coming from the height filtration of formal groups. In such a filtration there is a filtration component corresponding to each natural number $n$, which we will refer to as the $n$-th component. There are, at least, two different chromatic filtrations on $\Sp$, and their conjectural equivalence was recently disproven in \cite{burklund-hahn-levy-schlank_23}. For simplicity we will distinguish these two by referring to them as the \emph{compact filtration} and the \emph{finite filtration}. This latter is a bit misleading, as it is not a finite filtration---the word finite corresponds to a certain finite spectrum. The $n$-th filtration component in the compact filtration is controlled by the Morava $K$-theory\index{Morava $K$-theory} spectrum $K_p(n)$, and the $n$-th filtration component in the finite filtration is controlled by the telescope spectrum $T_p(n)$. 

We denote the $n$-th component of the compact filtration by $\Sp\np$\index{Spectra!$E\np$-local} and the $n$-th component of the finite filtration by $\Sp\np^f$. The different components are related by smashing localization functors 
\[L_{n-1,p}\:\Sp\np \to \Sp_{n-1,p}\] 
and 
\[L\np^f\: \Sp\np^f \to \Sp_{n-1,p}^f\] 
respectively. 

In the light of local duality, the category $\Sp_{n-1,p}$ is the category of local objects in $\Sp\np$ for a compact object $L\np F(n) \in \Sp\np$\index{Type $n$ spectrum}. The torsion objects with respect to $L\np F(n)$ is the category of \emph{monochromatic spectra}\index{Spectra!Monochromatic}, denoted $\M\np$ and the category of complete objects are the $K_p(n)$-local spectra, $\Sp_\Kpn$\index{Spectra!$K_p(n)$-local}. For more details on monochromatic and $K_p(n)$-local spectra, see \cite{hovey-strickland_99}, and for the relationship to local duality, see \cite[Section 6.2]{barthel-heard-valenzuela_2018}. 

\begin{proposition}
    For any prime $p$ and non-negative integer $n$, there are equivalences 
    \[\M\np \simeq \Comod_{M\np\S}(\Sp\np)\] 
    and 
    \[\SpKpn\simeq \Contra_{M\np\S}(\Sp\np)\]
    of symmetric monoidal stable $\infty$-categories. 
\end{proposition}
\begin{proof}
    This follows directly from \cref{ch2:thm:local-duality-co-contra}, as $L\np F(n)$ is compact in $\Sp\np$, making the pair $(\Sp\np, L\np F(n))$ a local duality context. 
\end{proof}

We also have a similar description of the objects coming from the finite chromatic filtration. 

\begin{proposition}
    \index{Spectra!$T_p(n)$-local}
    \index{Contramodule}
    For any prime $p$ and non-negative integer $n$, there are equivalences 
    \[\M\np^f \simeq \Comod_{M\np^f\S}(\Sp\np^f)\] 
    and 
    \[\Sp_{T_p(n)}\simeq \Contra_{M\np^f\S}(\Sp\np^f)\] 
    of symmetric monoidal stable $\infty$-categories. 
\end{proposition}
\begin{proof}
    As the functor $M\np^f\: \Sp\np^f \to \M\np^f$ is a smashing colocalization, \cref{ch2:thm:dual-monoidal-BB} gives an equivalence 
    \[\M\np^f \simeq \Comod_{M\np^f \S}(\Sp\np^f).\]
    As there is an equivalence $\M\np^f \simeq \Sp_{T_p(n)}$ the claim of the result is then a formal consequence of \cref{ch2:thm:Positselski-duality-coidempotent}.
\end{proof}

\begin{remark}
    In light of \cref{ch2:rm:contramodule-over-pro-ring} we would really like to have a description of $\SpKpn$ and $\Sp_{T_p(n)}$ via certain contramodules over their respective units, which are the $K_p(n)$-local and $T_p(n)$-local spheres respectively. These spheres are both naturally commutative algebras in $\Pro(\Sp\np^\omega)$ and $\Pro(\Sp\np^{f, \omega})$ respectively, hence a natural starting point is to take advantage of this fact. We will investigate this in joint work with Florian Riedel. 
\end{remark}

\subsubsection*{Derived completion}
\label{ch2:ssec:derived-completion}

Let $R$ be a commutative noetherian ring and $I\subseteq R$ an ideal generated by a finite regular sequence. The $I$-adic completion functor 
\[C^I\: \Mod_R \to \Mod_R,\] 
defined by $C^I(M)=\lim_k M/I^k$ is neither a left nor right exact functor. However, by \cite[5.1]{greenlees-may_92} the higher right derived functors vanish. We denote the higher left derived functors of $C^I$ by $L^I_i$. An $R$-module $M$ is said to be \emph{$I$-adically complete}\index{I-adically complete module} if the natural map 
\[M\to C^I (M)\] 
is an isomorphism. It is said to be \emph{$L$-complete}\index{L-complete module} if the natural map 
\[M\to L_0^I(M)\] 
is an isomorphism. 

The map $M\to C^I(M)$ factors through $L_0^I(M)$, and the map 
\[L_0^I(M)\to C^I(M)\] 
is always an epimorphism, but usually not an isomorphism. The full subcategory consisting of the $L$-complete modules form an abelian category $\Mod_R\Icomp$. The full subcategory of $I$-adically complete modules, $\Mod_R^\wedge$ is usually not abelian. 

The $I$-power torsion submodule of an $R$-module $M$ is defined to be 
\[T_I(M) := \{m \in M \mid I^k m = 0 \text{ for some } k\geq 0\}.\]
We say an $R$-module $M$ is $I$-power torsion\index{I-power torsion!Module} if the natural map 
\[T_I(M) \to M\] 
is an isomorphism. The full subcategory consisting of $I$-power torsion $R$-modules forms a Grothendieck abelian category, denoted $\Mod_R\Itors$. 

The object $R/I$ is compact in $\Der(R)$, which is a rigidly compactly generated symmetric monoidal stable $\infty$-category\index{Compactly generated!Rigid}. Hence, $(\Der(R), R/I)$ is a local duality context. The category $\Der(R)^{R/I-\mathrm{tors}}$ is by \cite[3.7(2)]{barthel-heard-valenzuela_2020} equivalent to $\Der(\Mod_R\Itors)$, the derived category $I$-power torsion modules. Furthermore, the category $\Der(R)^{R/I-\mathrm{comp}}$ is by \cite[3.7(1)]{barthel-heard-valenzuela_2020} equivalent to the right completion of the derived category of $\Mod_R\Icomp$. 

The functors $\Gamma$ and $\Lambda$ coming from this local duality context can by \cite[3.16]{barthel-heard-valenzuela_2018} be identified with the total right derived functor $\mathbb{R}T_I$ and the total left derived functor $\mathbb{L}C^I$ respectively. By \cref{ch2:thm:Positselski-duality-coidempotent} we know that these are the cofree comodule functor and the free contramodule functor, hence we can conclude with the following. 

\begin{proposition}
    There are symmetric monoidal equivalences
    \[\Der(R)^{R/I-tors}\simeq \Der(\Mod_R\Itors)\simeq \Comod_{\mathbb{R}T_I(R)}\]
    and 
    \[\Der(R)^{R/I-\mathrm{comp}}\simeq \Der(\Mod_R\Icomp)\simeq \Contra_{\mathbb{R}T_I(R)}\]
\end{proposition}

Interestingly, there are also descriptions of the category $\Mod_R\Icomp$ as a category of contramodules, and $\Mod_R\Itors$ as a category of comodules. This makes the above example into an example of the derived co-contra-correspondence, see for example \cite{positselski_2016}. 

As for the $\Kpn$-local case described above, the equivalences
\[\Der(R)^{R/I-\mathrm{comp}}\simeq \Der(\Mod_R\Icomp)\simeq \Contra_{\mathbb{R}T_I(R)}\]
is somewhat unsatisfactory, as we would really like to have equivalences 
\[\Der(R)^{R/I-\mathrm{comp}}\simeq \Der(\Mod_R\Icomp)\simeq \Contra_{\mathbb{L}C^I(R)}\]
instead. We hope that the before-mentioned future joint work with Florian Riedel will shed some light on this, hopefully giving such an equivalence.  